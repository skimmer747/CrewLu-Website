///
/// Import Wizard Styles for CrewLu Website
/// Styles for the interactive import instructions wizard
///

// Wizard Container
.import-wizard {
	margin: 2em 0;

	.wizard-progress {
		margin-bottom: 2em;
		text-align: center;

		.progress-steps {
			display: inline-flex;
			align-items: center;
			gap: 1rem;

			.step {
				width: 2.5rem;
				height: 2.5rem;
				border-radius: 50%;
				background: transparent;
				border: 2px solid var(--color-border);
				color: var(--color-fg);
				display: flex;
				align-items: center;
				justify-content: center;
				font-weight: bold;
				transition: all 0.3s ease;
				position: relative;

				&.active {
					background: var(--color-accent);
					color: var(--color-bg);
					border-color: var(--color-accent);
					transform: scale(1.05);
				}

				&.completed {
					background: var(--color-accent);
					color: var(--color-bg);
					border-color: var(--color-accent);
					transform: scale(1.1);
					box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);

					&::after {
						content: 'âœ“';
						font-size: 1.2em;
					}
				}

				// Connecting lines between steps
				&:not(:last-child)::before {
					content: '';
					position: absolute;
					top: 50%;
					left: 100%;
					width: 1rem;
					height: 2px;
					background: var(--color-border);
					transform: translateY(-50%);
					z-index: -1;
				}

				&.active:not(:last-child)::before {
					background: var(--color-accent);
				}
			}
		}
	}
}

// Wizard Summary
.wizard-summary {
	margin-bottom: 2em;

	h3 {
		color: var(--color-fg-bold);
	}

	p {
		color: var(--color-fg);
	}

	.editable-choice {
		color: var(--color-accent);
		cursor: pointer;
		text-decoration: underline;
		transition: color 0.2s ease;

		&:hover {
			color: var(--color-accent-secondary);
		}
	}
}

// Question Area
.wizard-question {
	text-align: center;
	margin-bottom: 2em;

	h2 {
		margin-bottom: 1.5em;
		color: var(--color-fg-bold);
	}
}

// Options
.wizard-options {
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
	gap: 1rem;
	margin-bottom: 2em;

	.option-btn {
		padding: 1.5rem 2rem;
		font-size: 1.1em;
		min-height: 4rem;
		display: flex;
		align-items: center;
		justify-content: center;
		text-align: center;
		transition: all 0.3s ease;
		border: 2px solid var(--color-border);
		color: var(--color-fg-bold);

		&:hover {
			transform: translateY(-2px);
			box-shadow: 0 4px 12px rgba(0,0,0,0.1);
			border-color: var(--color-accent);
		}

		&:focus {
			outline: 2px solid var(--color-accent);
			outline-offset: 2px;
		}
	}
}

// Instructions Area
.wizard-instructions {
	.instruction-step {
		margin-bottom: 2em;

		h3 {
			color: var(--color-accent);
			margin-bottom: 1em;
			font-size: 1.3em;
		}

		p {
			font-size: 1.1em;
			line-height: 1.6;
			margin-bottom: 1em;
			word-break: break-word;
			overflow-wrap: break-word;

			a {
				word-break: break-word;
				overflow-wrap: break-word;
			}
		}

		.media-container {
			text-align: center;
			margin: 1.5em 0;

			.instruction-image {
				max-width: 100%;
				height: auto;
				border-radius: 8px;
				box-shadow: 0 4px 12px rgba(0,0,0,0.1);
				border: 1px solid var(--color-border);

				// Responsive max-width constraints for desktop
				@include breakpoint('>medium') {
					max-width: 600px;
				}

				@include breakpoint('<=medium') {
					max-width: 500px;
				}
			}

			video {
				max-width: 100%;
				height: auto;
				border-radius: 8px;
				box-shadow: 0 4px 12px rgba(0,0,0,0.1);
				border: 1px solid var(--color-border);
			}

			.media-caption {
				font-style: italic;
				color: var(--color-fg-light);
				margin-top: 0.5em;
				font-size: 0.9em;
				text-align: center;
			}
		}
	}

	.step-divider {
		border: 0;
		height: 1px;
		background: var(--color-border);
		margin: 3em 0;
		opacity: 0.5;
	}
}

// Navigation
.wizard-nav {
	display: flex;
	gap: 1rem;
	justify-content: center;
	margin-top: 2em;
	flex-wrap: wrap;

	button {
		min-width: 120px;
	}
}

// Error states
.error {
	border-left: 4px solid #e74c3c !important;

	h3 {
		color: #e74c3c;
	}
}

// Loading message
#loading-message {
	text-align: center;

	p {
		color: var(--color-fg-light);
		font-style: italic;
	}
}

// Dark mode adjustments
@media (prefers-color-scheme: dark) {
	.import-wizard {
		.wizard-progress .progress-steps .step {
			&:not(.active):not(.completed) {
				background: rgba(255, 255, 255, 0.1);
				color: rgba(255, 255, 255, 0.7);
			}
		}

		.wizard-question h2 {
			color: rgba(255, 255, 255, 0.9);
		}

		.wizard-instructions h2 {
			color: rgba(255, 255, 255, 0.9);
		}
	}

	.wizard-summary {
		h3 {
			color: rgba(255, 255, 255, 0.9);
		}

		p {
			color: rgba(255, 255, 255, 0.8);
		}
	}

	.wizard-options .option-btn {
		border-color: rgba(255, 255, 255, 0.2);
		background: rgba(255, 255, 255, 0.05);
		color: rgba(255, 255, 255, 0.9);

		&:hover {
			background: rgba(255, 255, 255, 0.1);
			border-color: rgba(59, 130, 246, 0.5);
		}
	}

	.wizard-instructions .media-container {
		.instruction-image, video {
			border-color: rgba(255, 255, 255, 0.2);
		}
	}

	#loading-message p {
		color: rgba(255, 255, 255, 0.6);
	}
}

[data-theme="dark"] {
	.import-wizard {
		.wizard-progress .progress-steps .step {
			&:not(.active):not(.completed) {
				background: rgba(255, 255, 255, 0.1);
				color: rgba(255, 255, 255, 0.7);
			}
		}

		.wizard-question h2 {
			color: rgba(255, 255, 255, 0.9);
		}

		.wizard-instructions h2 {
			color: rgba(255, 255, 255, 0.9);
		}
	}

	.wizard-summary {
		h3 {
			color: rgba(255, 255, 255, 0.9);
		}

		p {
			color: rgba(255, 255, 255, 0.8);
		}
	}

	.wizard-options .option-btn {
		border-color: rgba(255, 255, 255, 0.2);
		background: rgba(255, 255, 255, 0.05);
		color: rgba(255, 255, 255, 0.9);

		&:hover {
			background: rgba(255, 255, 255, 0.1);
			border-color: rgba(59, 130, 246, 0.5);
		}
	}

	.wizard-instructions .media-container {
		.instruction-image, video {
			border-color: rgba(255, 255, 255, 0.2);
		}
	}

	#loading-message p {
		color: rgba(255, 255, 255, 0.6);
	}
}

// Light mode overrides (higher specificity to override system preference)
[data-theme="light"] {
	.import-wizard {
		.wizard-question h2 {
			color: var(--color-fg-bold) !important;
		}

		.wizard-instructions h2 {
			color: var(--color-fg-bold) !important;
		}
	}

	.wizard-summary {
		h3 {
			color: var(--color-fg-bold) !important;
		}

		p {
			color: var(--color-fg) !important;
		}
	}

	.wizard-options .option-btn {
		color: var(--color-fg-bold) !important;
	}
}

// Responsive Design
@include breakpoint('<=medium') {
	.wizard-options {
		grid-template-columns: 1fr;

		.option-btn {
			padding: 1.2rem 1.5rem;
			min-height: 3.5rem;
		}
	}

	.wizard-nav {
		button {
			min-width: 100px;
			font-size: 0.9em;
		}
	}

	.wizard-progress .progress-steps {
		gap: 0.5rem;

		.step {
			width: 2rem;
			height: 2rem;
			font-size: 0.9em;

			&:not(:last-child)::before {
				width: 0.5rem;
			}
		}
	}
}

@include breakpoint('<=small') {
	.wizard-instructions .instruction-step {
		.media-container {
			margin: 1em 0;
		}

		h3 {
			font-size: 1.2em;
		}

		p {
			font-size: 1em;
		}
	}

	.wizard-nav {
		flex-direction: column;
		align-items: center;

		button {
			width: 100%;
			max-width: 280px;
		}
	}
}

// Animation for step transitions
.wizard-question, .wizard-instructions {
	animation: fadeInUp 0.5s ease-out;
}

@keyframes fadeInUp {
	from {
		opacity: 0;
		transform: translateY(20px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}